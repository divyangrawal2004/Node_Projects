<%- include('../header') %>

<div class="page-wrapper">
  <div class="container-fluid py-4">
    
    <!-- Page Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <div>
        <h3 class="fw-bold text-primary mb-1">Subcategory Management</h3>
        <p class="text-muted mb-0">Manage and organize your product subcategories easily</p>
      </div>
      <a href="/subcategory/addsubcategorypage" class="btn btn-primary shadow-sm px-4">
        ‚ûï Add Subcategory
      </a>
    </div>

    <!-- Search & Filter Section -->
    <div class="card border-0 shadow-sm mb-4">
      <div class="card-body">
        <form class="d-flex flex-wrap gap-2 align-items-center">
          <input 
            type="text" 
            name="search" 
            class="form-control shadow-sm" 
            placeholder="üîç Search by category or subcategory name..." 
            style="max-width: 400px;"
          />
          <button class="btn btn-success shadow-sm">Search</button>
          <a href="/subcategory/viewsubcategory" class="btn btn-outline-secondary shadow-sm">Reset</a>
        </form>
      </div>
    </div>

    <!-- Subcategory Table -->
    <div class="card border-0 shadow-lg">
      <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center rounded-top">
        <h5 class="mb-0">üìÇ Subcategory List</h5>
        <span class="badge bg-light text-dark">Total: <%= subcategories.length %></span>
      </div>

      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-hover align-middle mb-0">
            <thead class="table-light border-bottom">
              <tr class="text-center">
                <th>#</th>
                <th>Category Image</th>
                <th>Category Name</th>
                <th>Subcategory Name</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <% if (subcategories && subcategories.length > 0) { %>
                <% subcategories.map((v, i) => { %>
                  <tr class="text-center">
                    <td class="fw-semibold"><%= i + 1 %></td>
                    <td>
                      <img 
                        src="<%= v.category.categoryimage %>" 
                        alt="Category" 
                        class="rounded-circle border shadow-sm" 
                        style="height:60px; width:60px; object-fit:cover;"
                      >
                    </td>
                    <td class="fw-medium text-capitalize"><%= v.category.categoryname %></td>
                    <td class="text-muted text-capitalize"><%= v.subcategory %></td>
                    <td>
                      <a href="/subcategory/editsubcategorypage/<%= v.id %>" 
                         class="btn btn-sm btn-warning me-2 shadow-sm">
                        ‚úèÔ∏è Edit
                      </a>
                      <a href="/subcategory/deletesubcategory/<%= v.id %>" 
                         class="btn btn-sm btn-danger shadow-sm"
                         onclick="return confirm('Are you sure you want to delete this subcategory?')">
                        üóëÔ∏è Delete
                      </a>
                    </td>
                  </tr>
                <% }) %>
              <% } else { %>
                <tr>
                  <td colspan="5" class="text-center text-muted py-4">
                    No Subcategories Found üòî
                  </td>
                </tr>
              <% } %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include('../footer') %>
